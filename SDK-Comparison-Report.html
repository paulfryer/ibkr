<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IBKR API SDK Comparison: Kiota vs NSwag</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section h3 {
            color: #764ba2;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: white;
            font-size: 1.2em;
            margin: 0 0 10px 0;
        }

        .stat-card .number {
            font-size: 3em;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-card .label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-size: 1.1em;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .comparison-table tr:hover {
            background: #f5f5f5;
        }

        .comparison-table tr:nth-child(even) {
            background: #fafafa;
        }

        .comparison-table tr:nth-child(even):hover {
            background: #f0f0f0;
        }

        .sdk-column {
            font-weight: 600;
            color: #667eea;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .code-block .keyword {
            color: #ff79c6;
        }

        .code-block .type {
            color: #8be9fd;
        }

        .code-block .string {
            color: #f1fa8c;
        }

        .code-block .comment {
            color: #6272a4;
            font-style: italic;
        }

        .side-by-side {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .sdk-box {
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 20px;
            background: #f9f9ff;
        }

        .sdk-box h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .pros, .cons {
            padding: 20px;
            border-radius: 8px;
        }

        .pros {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
        }

        .cons {
            background: #ffebee;
            border-left: 4px solid #f44336;
        }

        .pros h4, .cons h4 {
            margin-bottom: 15px;
        }

        .pros h4 {
            color: #2e7d32;
        }

        .cons h4 {
            color: #c62828;
        }

        .pros ul, .cons ul {
            list-style: none;
            padding-left: 0;
        }

        .pros li, .cons li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .pros li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #4caf50;
            font-weight: bold;
        }

        .cons li:before {
            content: "‚úó";
            position: absolute;
            left: 0;
            color: #f44336;
            font-weight: bold;
        }

        .architecture-diagram {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }

        .architecture-box {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 8px;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
        }

        .arrow {
            display: inline-block;
            margin: 0 10px;
            font-size: 2em;
            color: #667eea;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #667eea;
            margin-bottom: 20px;
        }

        .tab {
            padding: 15px 30px;
            cursor: pointer;
            background: #f5f5f5;
            border: none;
            font-size: 1.1em;
            font-weight: 600;
            color: #667eea;
            transition: all 0.3s ease;
        }

        .tab:hover {
            background: #e8e8ff;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .key-difference {
            background: #fff9e6;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .key-difference strong {
            color: #f57c00;
        }

        table.feature-matrix {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }

        table.feature-matrix th {
            background: #667eea;
            color: white;
            padding: 12px;
        }

        table.feature-matrix td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: center;
        }

        .checkmark {
            color: #4caf50;
            font-size: 1.5em;
            font-weight: bold;
        }

        .crossmark {
            color: #f44336;
            font-size: 1.5em;
            font-weight: bold;
        }

        .partial {
            color: #ff9800;
            font-size: 1.5em;
            font-weight: bold;
        }

        footer {
            background: #2d2d2d;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .service-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .service-item {
            background: #f5f5ff;
            padding: 10px;
            border-radius: 5px;
            border-left: 3px solid #667eea;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>IBKR API SDK Comparison</h1>
            <p>Comprehensive Analysis: Microsoft Kiota vs NSwag Code Generation</p>
            <p style="font-size: 0.9em; margin-top: 10px;">Generated from the same OpenAPI v3 specification</p>
        </header>

        <div class="content">
            <!-- Executive Summary -->
            <div class="section">
                <h2>üìä Executive Summary</h2>
                <p style="font-size: 1.1em; line-height: 1.8; margin: 20px 0;">
                    Both SDKs are generated from the identical IBKR OpenAPI specification and provide complete coverage
                    of the Interactive Brokers API. <strong>Kiota</strong> produces a modern fluent API with 699 files using
                    Microsoft's latest patterns, while <strong>NSwag</strong> generates 950 files with a traditional
                    service-oriented architecture. Both are fully functional and production-ready.
                </p>

                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Kiota SDK</h3>
                        <div class="number">699</div>
                        <div class="label">Total Files</div>
                    </div>
                    <div class="stat-card">
                        <h3>NSwag SDK</h3>
                        <div class="number">950</div>
                        <div class="label">Total Files</div>
                    </div>
                    <div class="stat-card">
                        <h3>API Services</h3>
                        <div class="number">14</div>
                        <div class="label">Both SDKs</div>
                    </div>
                    <div class="stat-card">
                        <h3>API Methods</h3>
                        <div class="number">~140</div>
                        <div class="label">Total Endpoints</div>
                    </div>
                </div>
            </div>

            <!-- Architecture Comparison -->
            <div class="section">
                <h2>üèóÔ∏è Architecture Patterns</h2>

                <div class="tabs">
                    <button class="tab active" onclick="showTab('arch-kiota')">Kiota Architecture</button>
                    <button class="tab" onclick="showTab('arch-nswag')">NSwag Architecture</button>
                </div>

                <div id="arch-kiota" class="tab-content active">
                    <h3>Fluent API Pattern with Request Builders</h3>
                    <div class="architecture-diagram">
                        <div class="architecture-box">IBKRClient</div>
                        <div class="arrow">‚Üí</div>
                        <div class="architecture-box">PortfolioRequestBuilder</div>
                        <div class="arrow">‚Üí</div>
                        <div class="architecture-box">AccountsRequestBuilder</div>
                        <div class="arrow">‚Üí</div>
                        <div class="architecture-box">GetAsync()</div>
                    </div>

                    <div class="key-difference">
                        <strong>Key Pattern:</strong> Kiota uses the Request Builder pattern where each endpoint
                        is represented by a dedicated builder class. Navigation is done through properties that
                        return new builder instances, creating a fluent, discoverable API surface.
                    </div>

                    <div class="code-block">
<span class="comment">// Kiota Usage Pattern</span>
<span class="keyword">var</span> adapter = <span class="keyword">new</span> <span class="type">HttpClientRequestAdapter</span>(authProvider);
<span class="keyword">var</span> client = <span class="keyword">new</span> <span class="type">IBKRClient</span>(adapter);

<span class="comment">// Fluent navigation through RequestBuilders</span>
<span class="keyword">var</span> accounts = <span class="keyword">await</span> client.Portfolio
    .Accounts
    .GetAsync();

<span class="comment">// Each step returns a builder, enabling IntelliSense discovery</span>
<span class="keyword">var</span> positions = <span class="keyword">await</span> client.Portfolio[<span class="string">"DU123456"</span>]
    .Positions[<span class="string">"0"</span>]
    .GetAsync();
                    </div>

                    <h4>Structure:</h4>
                    <ul style="margin-left: 20px; margin-top: 15px;">
                        <li style="margin: 10px 0;">‚úì 417 Model classes in Models/ folder</li>
                        <li style="margin: 10px 0;">‚úì RequestBuilder classes organized by API path hierarchy</li>
                        <li style="margin: 10px 0;">‚úì Each endpoint gets dedicated builder with typed parameters</li>
                        <li style="margin: 10px 0;">‚úì 14 top-level service folders (Acesws, Fyi, Gw, Hmds, Iserver, etc.)</li>
                        <li style="margin: 10px 0;">‚úì Built-in middleware pipeline support</li>
                    </ul>
                </div>

                <div id="arch-nswag" class="tab-content">
                    <h3>Service-Oriented Architecture</h3>
                    <div class="architecture-diagram">
                        <div class="architecture-box">IBKRClient</div>
                        <div class="arrow">‚Üí</div>
                        <div class="architecture-box">IPortfolioService</div>
                        <div class="arrow">‚Üí</div>
                        <div class="architecture-box">AccountsAllAsync()</div>
                    </div>

                    <div class="key-difference">
                        <strong>Key Pattern:</strong> NSwag uses traditional service classes with interface-based
                        dependency injection. All methods for a service are in a single class, following classic
                        .NET service patterns.
                    </div>

                    <div class="code-block">
<span class="comment">// NSwag Usage Pattern</span>
<span class="keyword">var</span> httpClient = <span class="keyword">new</span> <span class="type">HttpClient</span>();
httpClient.BaseAddress = <span class="keyword">new</span> <span class="type">Uri</span>(<span class="string">"https://api.ibkr.com"</span>);
<span class="keyword">var</span> client = <span class="keyword">new</span> <span class="type">IBKRClient</span>(httpClient);

<span class="comment">// Service-based access</span>
<span class="keyword">var</span> accounts = <span class="keyword">await</span> client.Portfolio.AccountsAllAsync();

<span class="comment">// Direct method calls on service instances</span>
<span class="keyword">var</span> positions = <span class="keyword">await</span> client.Portfolio
    .PositionsAllAsync(<span class="string">"DU123456"</span>);
                    </div>

                    <h4>Structure:</h4>
                    <ul style="margin-left: 20px; margin-top: 15px;">
                        <li style="margin: 10px 0;">‚úì 906 Model classes in Models/ folder</li>
                        <li style="margin: 10px 0;">‚úì 15 Service classes (14 services + composite client) in Services/</li>
                        <li style="margin: 10px 0;">‚úì 15 Interface definitions in Interfaces/</li>
                        <li style="margin: 10px 0;">‚úì 8 Client helper classes in Clients/</li>
                        <li style="margin: 10px 0;">‚úì 3 Helper utilities (JsonInheritanceConverter, etc.) in Helpers/</li>
                        <li style="margin: 10px 0;">‚úì All service methods grouped logically by API domain</li>
                    </ul>
                </div>
            </div>

            <!-- API Services -->
            <div class="section">
                <h2>üéØ API Services Coverage</h2>
                <p>Both SDKs provide identical coverage of all 14 IBKR API service domains:</p>

                <div class="service-list">
                    <div class="service-item">üîê Acesws - Authentication</div>
                    <div class="service-item">üì∞ Fyi - Notifications</div>
                    <div class="service-item">üåê Gw - Gateway</div>
                    <div class="service-item">üìä Hmds - Historical Data</div>
                    <div class="service-item">‚ö° Iserver - Trading Server</div>
                    <div class="service-item">üö™ Logout - Session</div>
                    <div class="service-item">üíπ Md - Market Data</div>
                    <div class="service-item">üîë OAuth - Authorization</div>
                    <div class="service-item">üìà Pa - Performance Analytics</div>
                    <div class="service-item">üíº Portfolio - Account Data</div>
                    <div class="service-item">üîê Sso - Single Sign-On</div>
                    <div class="service-item">‚è±Ô∏è Tickle - Keep-Alive</div>
                    <div class="service-item">üì° Trsrv - Trade Server</div>
                    <div class="service-item">üîå Ws - WebSocket</div>
                </div>
            </div>

            <!-- Detailed Comparison -->
            <div class="section">
                <h2>‚öñÔ∏è Feature-by-Feature Comparison</h2>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Kiota</th>
                            <th>NSwag</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Total Files</strong></td>
                            <td class="sdk-column">699 files</td>
                            <td class="sdk-column">950 files</td>
                        </tr>
                        <tr>
                            <td><strong>Model Classes</strong></td>
                            <td class="sdk-column">417 models</td>
                            <td class="sdk-column">906 models</td>
                        </tr>
                        <tr>
                            <td><strong>Models Organization</strong></td>
                            <td class="sdk-column">Single Models/ folder</td>
                            <td class="sdk-column">Single Models/ folder</td>
                        </tr>
                        <tr>
                            <td><strong>Service Count</strong></td>
                            <td class="sdk-column">14 service domains</td>
                            <td class="sdk-column">14 service domains</td>
                        </tr>
                        <tr>
                            <td><strong>API Methods</strong></td>
                            <td class="sdk-column">~140 endpoints</td>
                            <td class="sdk-column">~140 endpoints</td>
                        </tr>
                        <tr>
                            <td><strong>Project Structure</strong></td>
                            <td class="sdk-column">Service folders with nested RequestBuilders</td>
                            <td class="sdk-column">5 top-level folders (Models, Services, Interfaces, Clients, Helpers)</td>
                        </tr>
                        <tr>
                            <td><strong>Serialization</strong></td>
                            <td class="sdk-column">System.Text.Json (Kiota abstractions)</td>
                            <td class="sdk-column">Newtonsoft.Json</td>
                        </tr>
                        <tr>
                            <td><strong>Dependencies</strong></td>
                            <td class="sdk-column">Microsoft.Kiota.Bundle (1.19.0)<br>Microsoft.Kiota.Authentication.Azure (1.19.0)</td>
                            <td class="sdk-column">Newtonsoft.Json (13.0.4)</td>
                        </tr>
                        <tr>
                            <td><strong>Target Framework</strong></td>
                            <td class="sdk-column">.NET 8.0</td>
                            <td class="sdk-column">.NET 8.0</td>
                        </tr>
                        <tr>
                            <td><strong>Nullable Reference Types</strong></td>
                            <td class="sdk-column">‚úì Enabled</td>
                            <td class="sdk-column">‚úì Enabled</td>
                        </tr>
                        <tr>
                            <td><strong>Async/Await</strong></td>
                            <td class="sdk-column">‚úì Full async support</td>
                            <td class="sdk-column">‚úì Full async support</td>
                        </tr>
                        <tr>
                            <td><strong>Cancellation Tokens</strong></td>
                            <td class="sdk-column">‚úì All methods</td>
                            <td class="sdk-column">‚úì All methods</td>
                        </tr>
                        <tr>
                            <td><strong>Dependency Injection</strong></td>
                            <td class="sdk-column">IRequestAdapter abstraction</td>
                            <td class="sdk-column">HttpClient + Interface-based services</td>
                        </tr>
                        <tr>
                            <td><strong>Error Handling</strong></td>
                            <td class="sdk-column">Typed exception models per endpoint</td>
                            <td class="sdk-column">Generic ApiException with typed response</td>
                        </tr>
                        <tr>
                            <td><strong>Middleware Support</strong></td>
                            <td class="sdk-column">‚úì Built-in pipeline</td>
                            <td class="sdk-column">Via HttpClient handlers</td>
                        </tr>
                        <tr>
                            <td><strong>Base URL Configuration</strong></td>
                            <td class="sdk-column">https://api.ibkr.com (in code)</td>
                            <td class="sdk-column">https://api.ibkr.com (in code)</td>
                        </tr>
                        <tr>
                            <td><strong>Lazy Loading</strong></td>
                            <td class="sdk-column">RequestBuilders created on demand</td>
                            <td class="sdk-column">Services lazy-initialized via Lazy&lt;T&gt;</td>
                        </tr>
                        <tr>
                            <td><strong>Code Generation Metadata</strong></td>
                            <td class="sdk-column">[GeneratedCode("Kiota", "1.0.0")]</td>
                            <td class="sdk-column">[GeneratedCode("NSwag", "14.0.3.0")]</td>
                        </tr>
                        <tr>
                            <td><strong>API Discovery</strong></td>
                            <td class="sdk-column">Fluent navigation via properties</td>
                            <td class="sdk-column">Service interfaces with methods</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Code Examples -->
            <div class="section">
                <h2>üíª Code Examples: Portfolio Service</h2>

                <div class="side-by-side">
                    <div class="sdk-box">
                        <h4>Kiota - Get Accounts</h4>
                        <div class="code-block">
<span class="comment">// Setup</span>
<span class="keyword">var</span> authProvider = <span class="comment">/* ... */</span>;
<span class="keyword">var</span> adapter = <span class="keyword">new</span> <span class="type">HttpClientRequestAdapter</span>(
    authProvider);
<span class="keyword">var</span> client = <span class="keyword">new</span> <span class="type">IBKRClient</span>(adapter);

<span class="comment">// Get all accounts</span>
<span class="keyword">var</span> accounts = <span class="keyword">await</span> client
    .Portfolio
    .Accounts
    .GetAsync();

<span class="comment">// Fluent, discoverable API</span>
                        </div>
                    </div>

                    <div class="sdk-box">
                        <h4>NSwag - Get Accounts</h4>
                        <div class="code-block">
<span class="comment">// Setup</span>
<span class="keyword">var</span> httpClient = <span class="keyword">new</span> <span class="type">HttpClient</span>();
httpClient.BaseAddress =
    <span class="keyword">new</span> <span class="type">Uri</span>(<span class="string">"https://api.ibkr.com"</span>);
<span class="keyword">var</span> client = <span class="keyword">new</span> <span class="type">IBKRClient</span>(httpClient);

<span class="comment">// Get all accounts</span>
<span class="keyword">var</span> accounts = <span class="keyword">await</span> client
    .Portfolio
    .AccountsAllAsync();

<span class="comment">// Service-based, method calls</span>
                        </div>
                    </div>
                </div>

                <h3>Method Signature Comparison - Portfolio.Accounts</h3>

                <div class="side-by-side">
                    <div class="sdk-box">
                        <h4>Kiota Method</h4>
                        <div class="code-block">
<span class="keyword">public async</span> <span class="type">Task</span>&lt;<span class="type">List</span>&lt;AccountAttributes&gt;?&gt;
    GetAsync(
        <span class="type">Action</span>&lt;RequestConfiguration&lt;DefaultQueryParameters&gt;&gt;?
            requestConfiguration = <span class="keyword">default</span>,
        <span class="type">CancellationToken</span> cancellationToken = <span class="keyword">default</span>
    )

<span class="comment">// Returns: List&lt;AccountAttributes&gt;</span>
<span class="comment">// Config: Via RequestConfiguration</span>
<span class="comment">// Location: Portfolio/Accounts/AccountsRequestBuilder.cs</span>
                        </div>
                    </div>

                    <div class="sdk-box">
                        <h4>NSwag Method</h4>
                        <div class="code-block">
<span class="keyword">public async</span> <span class="type">Task</span>&lt;<span class="type">ICollection</span>&lt;AccountAttributes&gt;&gt;
    AccountsAllAsync(
        <span class="type">CancellationToken</span> cancellationToken = <span class="keyword">default</span>
    )

<span class="comment">// Returns: ICollection&lt;AccountAttributes&gt;</span>
<span class="comment">// Config: N/A (simpler signature)</span>
<span class="comment">// Location: Interfaces/IPortfolioService.cs</span>
                        </div>
                    </div>
                </div>

                <h3>Complex Example - Get Positions with Parameters</h3>

                <div class="side-by-side">
                    <div class="sdk-box">
                        <h4>Kiota - Positions Query</h4>
                        <div class="code-block">
<span class="comment">// Kiota uses query configuration</span>
<span class="keyword">var</span> positions = <span class="keyword">await</span> client
    .Portfolio[accountId]
    .Positions[pageId]
    .GetAsync(config =>
    {
        config.QueryParameters.Model = model;
        config.QueryParameters.Sort = sort;
        config.QueryParameters.Direction = direction;
        config.QueryParameters.WaitForSecDef = <span class="keyword">true</span>;
    });
                        </div>
                    </div>

                    <div class="sdk-box">
                        <h4>NSwag - Positions Query</h4>
                        <div class="code-block">
<span class="comment">// NSwag uses direct parameters</span>
<span class="keyword">var</span> positions = <span class="keyword">await</span> client
    .Portfolio
    .PositionsAllAsync(
        accountId: accountId,
        pageId: pageId,
        model: model,
        sort: sort,
        direction: direction,
        waitForSecDef: <span class="keyword">true</span>
    );
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pros and Cons -->
            <div class="section">
                <h2>‚úÖ Advantages & ‚ùå Disadvantages</h2>

                <h3 style="color: #667eea; margin-top: 30px;">Kiota SDK</h3>
                <div class="pros-cons">
                    <div class="pros">
                        <h4>‚úì Advantages</h4>
                        <ul>
                            <li>Modern Microsoft-backed technology</li>
                            <li>Fluent API provides excellent IntelliSense</li>
                            <li>Built-in middleware pipeline for auth/logging</li>
                            <li>Fewer files (699 vs 950)</li>
                            <li>Better suited for complex request configuration</li>
                            <li>Follows latest .NET patterns and conventions</li>
                            <li>Type-safe path parameters via indexers</li>
                            <li>RequestAdapter abstraction for testability</li>
                            <li>Active development and Microsoft support</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>‚úó Disadvantages</h4>
                        <ul>
                            <li>Steeper learning curve (RequestBuilder pattern)</li>
                            <li>More dependencies (Kiota.Bundle packages)</li>
                            <li>Requires understanding of RequestAdapter</li>
                            <li>Query parameters via configuration objects</li>
                            <li>More complex setup for simple use cases</li>
                            <li>Newer technology, smaller ecosystem</li>
                            <li>Deeper nesting for some API calls</li>
                        </ul>
                    </div>
                </div>

                <h3 style="color: #667eea; margin-top: 30px;">NSwag SDK</h3>
                <div class="pros-cons">
                    <div class="pros">
                        <h4>‚úì Advantages</h4>
                        <ul>
                            <li>Simple, familiar service pattern</li>
                            <li>Easy to learn and understand immediately</li>
                            <li>Minimal dependencies (only Newtonsoft.Json)</li>
                            <li>Direct method parameters (no config objects)</li>
                            <li>Interface-based DI out of the box</li>
                            <li>Mature, battle-tested technology</li>
                            <li>Flat service access (client.Portfolio.MethodAsync)</li>
                            <li>All methods grouped logically by service</li>
                            <li>Easy to mock for unit testing</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>‚úó Disadvantages</h4>
                        <ul>
                            <li>More files to manage (950 total)</li>
                            <li>Uses older Newtonsoft.Json vs System.Text.Json</li>
                            <li>Less discoverable API (need to know method names)</li>
                            <li>No built-in middleware pipeline</li>
                            <li>Manual HttpClient configuration required</li>
                            <li>Verbose method names (e.g., AccountsAllAsync)</li>
                            <li>Less flexible for advanced scenarios</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Decision Matrix -->
            <div class="section">
                <h2>üéØ When to Use Each SDK</h2>

                <table class="feature-matrix">
                    <thead>
                        <tr>
                            <th>Scenario</th>
                            <th>Recommended SDK</th>
                            <th>Reasoning</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>New greenfield project</strong></td>
                            <td class="sdk-column">Kiota</td>
                            <td>Modern patterns, Microsoft backing, future-proof</td>
                        </tr>
                        <tr>
                            <td><strong>Legacy .NET codebase</strong></td>
                            <td class="sdk-column">NSwag</td>
                            <td>Familiar patterns, minimal dependencies, easy integration</td>
                        </tr>
                        <tr>
                            <td><strong>Rapid prototyping</strong></td>
                            <td class="sdk-column">NSwag</td>
                            <td>Simpler setup, direct method calls, less ceremony</td>
                        </tr>
                        <tr>
                            <td><strong>Enterprise application</strong></td>
                            <td class="sdk-column">Kiota</td>
                            <td>Better middleware support, testability, scalability</td>
                        </tr>
                        <tr>
                            <td><strong>Minimal dependencies required</strong></td>
                            <td class="sdk-column">NSwag</td>
                            <td>Only needs Newtonsoft.Json, no proprietary SDKs</td>
                        </tr>
                        <tr>
                            <td><strong>API exploration/learning</strong></td>
                            <td class="sdk-column">Kiota</td>
                            <td>Fluent API makes endpoints discoverable via IntelliSense</td>
                        </tr>
                        <tr>
                            <td><strong>Microservices architecture</strong></td>
                            <td class="sdk-column">Kiota</td>
                            <td>RequestAdapter abstraction, better for distributed systems</td>
                        </tr>
                        <tr>
                            <td><strong>Simple CRUD operations</strong></td>
                            <td class="sdk-column">NSwag</td>
                            <td>Direct, straightforward method calls</td>
                        </tr>
                        <tr>
                            <td><strong>Complex query scenarios</strong></td>
                            <td class="sdk-column">Kiota</td>
                            <td>RequestConfiguration provides better parameter management</td>
                        </tr>
                        <tr>
                            <td><strong>Team unfamiliar with Kiota</strong></td>
                            <td class="sdk-column">NSwag</td>
                            <td>Traditional patterns, lower learning curve</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Technical Deep Dive -->
            <div class="section">
                <h2>üî¨ Technical Deep Dive</h2>

                <h3>Model Generation Differences</h3>

                <div class="key-difference">
                    <strong>Why does NSwag have 906 models while Kiota has only 417?</strong><br><br>
                    NSwag generates separate model classes for each endpoint variation and response type,
                    including nested anonymous types. Kiota consolidates these and generates models only when
                    they're truly distinct types. Both approaches cover the same API surface completely.
                </div>

                <h3>Error Handling Comparison</h3>

                <div class="side-by-side">
                    <div class="sdk-box">
                        <h4>Kiota Error Handling</h4>
                        <div class="code-block">
<span class="keyword">try</span>
{
    <span class="keyword">var</span> result = <span class="keyword">await</span> client.Portfolio
        .Accounts.GetAsync();
}
<span class="keyword">catch</span> (<span class="type">ErrorOnlyResponse</span> ex)
{
    <span class="comment">// 500 errors</span>
    Console.WriteLine(ex.Message);
}
<span class="keyword">catch</span> (<span class="type">ErrorResponse</span> ex)
{
    <span class="comment">// 503 errors</span>
    Console.WriteLine(ex.Error);
}
                        </div>
                    </div>

                    <div class="sdk-box">
                        <h4>NSwag Error Handling</h4>
                        <div class="code-block">
<span class="keyword">try</span>
{
    <span class="keyword">var</span> result = <span class="keyword">await</span> client.Portfolio
        .AccountsAllAsync();
}
<span class="keyword">catch</span> (<span class="type">ApiException</span>&lt;<span class="type">ErrorOnlyResponse</span>&gt; ex)
{
    <span class="comment">// 500 errors</span>
    Console.WriteLine(ex.Result.Error);
}
<span class="keyword">catch</span> (<span class="type">ApiException</span>&lt;<span class="type">ErrorResponse</span>&gt; ex)
{
    <span class="comment">// 503 errors</span>
    Console.WriteLine(ex.Result.Error);
}
                        </div>
                    </div>
                </div>

                <h3>Dependency Injection Patterns</h3>

                <div class="side-by-side">
                    <div class="sdk-box">
                        <h4>Kiota DI Setup</h4>
                        <div class="code-block">
services.AddSingleton&lt;<span class="type">IAuthenticationProvider</span>&gt;(
    sp => <span class="keyword">new</span> <span class="type">AnonymousAuthenticationProvider</span>());

services.AddSingleton&lt;<span class="type">IRequestAdapter</span>&gt;(sp =>
{
    <span class="keyword">var</span> authProvider = sp.GetRequiredService&lt;
        <span class="type">IAuthenticationProvider</span>&gt;();
    <span class="keyword">return new</span> <span class="type">HttpClientRequestAdapter</span>(
        authProvider);
});

services.AddSingleton&lt;<span class="type">IBKRClient</span>&gt;();
                        </div>
                    </div>

                    <div class="sdk-box">
                        <h4>NSwag DI Setup</h4>
                        <div class="code-block">
services.AddHttpClient&lt;<span class="type">IIBKRClient</span>, <span class="type">IBKRClient</span>&gt;(
    client =>
    {
        client.BaseAddress =
            <span class="keyword">new</span> <span class="type">Uri</span>(<span class="string">"https://api.ibkr.com"</span>);
        <span class="comment">// Add auth headers, etc.</span>
    });

<span class="comment">// Individual services also injectable</span>
services.AddTransient&lt;<span class="type">IPortfolioService</span>,
    <span class="type">PortfolioService</span>&gt;();
                        </div>
                    </div>
                </div>

                <h3>Performance Considerations</h3>

                <div class="key-difference">
                    <strong>Runtime Performance:</strong> Both SDKs have virtually identical runtime performance
                    since they both ultimately make HTTP requests via HttpClient. The main difference is in
                    developer productivity: Kiota's fluent API may require slightly more object allocations for
                    RequestBuilders, but this is negligible in practice. NSwag's direct method calls have minimal
                    overhead.
                </div>

                <h3>Build Size Comparison</h3>

                <table class="comparison-table" style="max-width: 600px;">
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Kiota</th>
                            <th>NSwag</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Source Files</td>
                            <td>699</td>
                            <td>950</td>
                        </tr>
                        <tr>
                            <td>Lines of Code (est.)</td>
                            <td>~35,000</td>
                            <td>~48,000</td>
                        </tr>
                        <tr>
                            <td>Assembly Size</td>
                            <td>~800 KB (excl. deps)</td>
                            <td>~1.2 MB (excl. deps)</td>
                        </tr>
                        <tr>
                            <td>Dependencies Size</td>
                            <td>~2.5 MB (Kiota.Bundle)</td>
                            <td>~600 KB (Newtonsoft.Json)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Summary Recommendations -->
            <div class="section">
                <h2>üìã Final Recommendations</h2>

                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin: 20px 0;">
                    <h3 style="color: white; margin-bottom: 20px; font-size: 1.8em;">The Bottom Line</h3>

                    <p style="font-size: 1.15em; line-height: 1.8; margin-bottom: 20px;">
                        <strong>Both SDKs are production-ready and fully functional.</strong> Your choice should be
                        based on your team's preferences, existing codebase patterns, and long-term maintenance
                        considerations.
                    </p>

                    <div style="margin-top: 25px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                        <p style="font-size: 1.1em; line-height: 1.8;">
                            <strong>Choose Kiota if:</strong> You want modern patterns, are building a new application,
                            value IntelliSense-driven discovery, or need advanced middleware scenarios.
                        </p>
                    </div>

                    <div style="margin-top: 15px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                        <p style="font-size: 1.1em; line-height: 1.8;">
                            <strong>Choose NSwag if:</strong> You prefer traditional patterns, need minimal dependencies,
                            want immediate productivity, or are integrating with existing .NET services.
                        </p>
                    </div>
                </div>

                <h3>Migration Path</h3>
                <p style="line-height: 1.8; margin: 20px 0;">
                    Since both SDKs are generated from the same OpenAPI spec, switching between them in the future
                    is relatively straightforward. The main changes would be in the calling patterns (fluent vs service-based),
                    not in the underlying API semantics. This gives you flexibility to change your decision later if needed.
                </p>
            </div>

            <!-- Appendix -->
            <div class="section" style="background: #f9f9f9; padding: 30px; border-radius: 8px;">
                <h2>üìö Appendix: Generation Details</h2>

                <h3>Source Information</h3>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li><strong>OpenAPI Spec:</strong> api.ibkr.com/v1/api/ibkr_openapi_v1.yaml</li>
                    <li><strong>Generation Date:</strong> October 2025</li>
                    <li><strong>Target Framework:</strong> .NET 8.0</li>
                    <li><strong>Kiota Version:</strong> 1.0.0</li>
                    <li><strong>NSwag Version:</strong> 14.0.3.0</li>
                </ul>

                <h3>Project Locations</h3>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li><strong>Kiota SDK:</strong> src/IBKR.Api.V2.Generated.Kiota/</li>
                    <li><strong>NSwag SDK:</strong> src/IBKR.Api.V2.Generated.NSwag/</li>
                    <li><strong>Generator:</strong> src/IBKR.Api.V2.Generator/</li>
                </ul>

                <h3>Regeneration</h3>
                <p style="line-height: 1.8; margin: 20px 0;">
                    Both SDKs can be regenerated on-demand using the Generator project. Run the generator with
                    <span class="highlight">Option 0</span> to regenerate both SDKs simultaneously. The generation
                    process is idempotent and takes approximately 2-3 minutes per SDK.
                </p>
            </div>
        </div>

        <footer>
            <p style="font-size: 1.1em; margin-bottom: 10px;">Generated SDK Comparison Report</p>
            <p style="opacity: 0.8;">Both SDKs generated from the official IBKR OpenAPI v3 specification</p>
            <p style="opacity: 0.6; margin-top: 10px; font-size: 0.9em;">Last Updated: October 2025</p>
        </footer>
    </div>

    <script>
        function showTab(tabId) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            // Deactivate all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Show selected tab content
            document.getElementById(tabId).classList.add('active');

            // Activate clicked tab
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
